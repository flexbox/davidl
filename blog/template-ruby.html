<!DOCTYPE html><html lang=fr><head prefix="og: http://ogp.me/ns# dc: http://purl.org/dc/terms/"><meta charset=utf-8 /><meta content="width=device-width,initial-scale=1" name=viewport /><title>Coder du HTML plus rapidement grâce au templating</title><meta content="Le language de balisage HTML est à la base du web. Son principal problème est -selon moi, sa lenteur d'écriture. " name=description /><meta content="index,follow" name=robots /><meta content="David Leuliette" property="dc:creator"/><meta content="text/html" property="dc:format"/><meta content=fr-FR property="dc:language"/><meta content="davidl • design & développement" property="og:site_name"/><meta content=website property="og:type"/><meta content="http://davidl.fr/blog/template-ruby.html" property="og:url"/><meta content="Coder du HTML plus rapidement grâce au templating" property="og:title"/><meta content="Le language de balisage HTML est à la base du web. Son principal problème est -selon moi, sa lenteur d'écriture. " property="og:description"/><meta content="" property="og:image"/><meta content="50.629250;3.057256" name="geo.position"/><meta content="Lille, Nord" name="geo.placename"/><meta content=FR-59 name="geo.region"/><meta content="@_flexbox" name="twitter:site"/><meta content="Coder du HTML plus rapidement grâce au templating" name="twitter:title"/><meta content="Le language de balisage HTML est à la base du web. Son principal problème est -selon moi, sa lenteur d'écriture. " name="twitter:description"/><meta content=summary name="twitter:card"/><meta content="" name="twitter:image"/><meta content="Coder du HTML plus rapidement grâce au templating" itemprop=name /><meta content="Le language de balisage HTML est à la base du web. Son principal problème est -selon moi, sa lenteur d'écriture. " itemprop=description /><meta content="" itemprop=image /><link href="https://plus.google.com/+DavidLeulietteWeb" rel=publisher /><link href="/feed.xml" rel=alternate title="davidl • design & développement" type="application/rss+xml"/><meta content=yes name=mobile-web-app-capable /><meta content="davidl • design & développement" name=application-name /><link href="/chrome-touch-icon-192x192.png" rel=icon sizes=192x192 /><meta content=yes name=apple-mobile-web-app-capable /><meta content=black name=apple-mobile-web-app-status-bar-style /><meta content="davidl • design & développement" name=apple-mobile-web-app-title /><link href="/apple-touch-icon.png" rel=apple-touch-icon /><meta content="ms-touch-icon-144x144-precomposed.png" name=msapplication-TileImage /><meta content="#607D8B" name=msapplication-TileColor /><meta content="#607D8B" name=theme-color /><link href="/favicon-196x196.png" rel=icon sizes=196x196 type="image/png"/><link href="/favicon-160x160.png" rel=icon sizes=160x160 type="image/png"/><link href="/favicon-96x96.png" rel=icon sizes=96x96 type="image/png"/><link href="/favicon-32x32.png" rel=icon sizes=32x32 type="image/png"/><link href="/favicon-16x16.png" rel=icon sizes=16x16 type="image/png"/><link href="../assets/stylesheets/application-3827c6d1.css" rel=stylesheet /><link href="https://fonts.googleapis.com/css?family=Lato:400,300,700" rel=stylesheet /><link href="https://netdna.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel=stylesheet /></head><body class=" blog blog_template-ruby"><header class=m-topbar id=js-topbar role=banner><nav aria-label=Primary class="m-topbar--list js-topbar--list is-away" role=navigation><a class=m-topbar--logo title="Retour à l’accueil" href="/"><img alt="davidl intégrateur web &amp; développeur front-end lille" src="../assets/images/atom-logo-4a5eee23.svg"/></a><a href="/consulting/">Consulting</a><a href="/about.html">À propos</a><a href="/blog/">Blog</a><a href="/contact.html">Contact</a></nav><div class=m-topbar--form id=js-topbar--form><a id=js-topbar--button class=l-menu href="#"><span>Menu</span></a><form action="http://www.google.com/search" class="l-search-form is-hidden" method=get><input id=js-search-input name=q placeholder="Ex : Conseils et bonnes pratiques" type=search /><input name=sitesearch type=hidden value="http://davidl.fr"/></form><a id=js-topbar--search class=l-action href="#"><i class="fa fa-search"></i></a><a id=js-topbar--close class="l-action is-hidden" href="#"><i class="fa fa-close"></i></a></div></header><div class=m-content role=main><header class=m-hero-banner><div class=row><h1 class=l-title>5 astuces pour utiliser slim avec ruby</h1><p class=l-emphasis>Écrire moins de code & résoudre plus de problèmes</p></div></header><div class=row><div class="medium-12 columns"><div class="m-panel l-blog-date"><i class="fa fa-calendar i-custom fa-lg"></i><time datetime=2014-09-07 pubdate="">07/09/2014</time></div></div></div><article class=row itemscope="" itemtype="http://schema.org/BlogPosting" role=article><div class="medium-8 medium-centered columns m-blog--article" itemprop=articleBody><p>Cela fait maintenant plus d’un an que j’ai abandonné l’univers <code>php</code> pour me consacrer à la galaxie ruby. En travaillant avec une architecture MVC, j’ai utilisé différents moteurs de templating comme smarty. Ruby possède aussi ses propres moteurs comme <code>erb</code>, <code>haml</code>, … Mais mon préféré -et de loin, reste <a href="http://slim-lang.com/">slim</a>.</p> <p>Pourquoi ? La raison est simple : je suis 2 fois plus performant. Avec ce templating, il n’est plus nécessaire pour le balisage HTML d’utiliser <code>&lt;</code>, <code>&gt;</code> et <code>/</code>. Résultat : le HTML est codé 2 fois plus rapidement (Même si des plugins comme emmet.io peuvent vous faciliter la vie). Votre code est 2 fois moins long et il est beaucoup plus rapide de scanner un fichier.</p> <p>Dans cet article je vais expliquer les astuces que j’ai apprises en lisant la documentation, pour vous éviter de parcourir inutilement stackoverflow pendant des heures afin de trouver la bonne pratique de codage.</p> <h2 id=les-bases>Les bases</h2> <p>La phylosophie de slim est de <em>supprimer tous les caractère inutiles</em>. Si l’on prends cet exemple <a href="http://slim-lang.com/">extrait de la documentation</a> on peut remarquer plusieurs choses :</p> <pre class="highlight haml"><code>  doctype html
  html
    head
      title Slim Examples
      meta name="keywords" content="template language"
      meta name="author" content=author
      javascript:
        alert('Slim supports embedded javascript!')
    body
      h1 Markup examples
      <span class="nf">#content</span>
        p This example shows you how a basic Slim file looks like.
        <span class="p">==</span> yield
        <span class="p">-</span> <span class="k">unless</span> <span class="n">items</span><span class="p">.</span><span class="nf">empty?</span>
          table
            <span class="p">-</span> <span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="n">items</span> <span class="k">do</span>
              tr
                td.name = item.name
                td.price = item.price
        <span class="p">-</span> <span class="k">else</span>
          p
           | No items found.  Please add some inventory.
             Thank you!
      <span class="nf">#footer</span>
        Copyright © <span class="si">#{</span><span class="n">year</span><span class="si">}</span> <span class="si">#{</span><span class="n">author</span><span class="si">}</span>
</code></pre> <ul> <li>Pas de fermeture de balises</li> <li><code>#content</code> donnera <code>&lt;div id="content"&gt;&lt;/div&gt;</code></li> <li><code>td.name</code> se transformera en <code>&lt;td class="name"&gt;&lt;/td&gt;</code></li> <li><code>= link_to 'Mon site', 'http://davidl.fr'</code> pour utiliser du ruby qui sera compilé en <code>&lt;a href="http://davidl.fr"&gt;Mon site&lt;/a&gt;</code></li> <li><code>- if i.am == amazing</code> permet de faire des tests ou des boucles</li> </ul> <h2 id=gestion-des-espaces>Gestion des espaces</h2> <p>Si vous avez suivi mon <a href="http://davidl.fr/blog/">tunning de sublime Text</a> vous savez que je supprime les espaces inutiles en fin de ligne à chaque sauvegarde. Cet avantage peut se transformer en inconvénient et voici comment gérer les espaces avec slim et vous éviter d'utiliser <code>&amp;nbsp;</code></p> <ul> <li><code>'</code> Ajoute un espace en fin de ligne.</li> <li><code>|</code> Permet d'ajouter du texte sans espace.</li> </ul> <p>Ce qui donne dans un cas concret :</p> <pre class="highlight haml"><code>    p
      'Voici un paragraphe avec
       <span class="p">=</span> <span class="n">link_to</span> <span class="s1">'un lien vers un site'</span><span class="p">,</span> <span class="s1">'http://guidecss.fr'</span>

    p
      |Un autre paragraphe
      ', avec une virgule.
</code></pre> <h2 id=optimiser-les-moteurs-de-recherche-avec-les-balises-schemaorg>Optimiser les moteurs de recherche avec les balises schema.org</h2> <p>Schema.org est un format de micro données qui permet aux moteurs de recherches et aux différents appareils de comprendre la structure des informations. Voici un exemple simple pour le balisage d'un fil d'arianne</p> <pre class="highlight haml"><code>    ul class="breadcrumbs"
      li itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"
        <span class="p">=</span> <span class="n">link_to</span> <span class="s1">'/index.html'</span><span class="p">,</span> <span class="ss">itemprop: </span><span class="s1">'url'</span> <span class="k">do</span>
          span itemprop="title"
            |Accueil
</code></pre> <ul> <li><code>itemscope=""</code> sera interprété en <code>itemscope</code>, c'est l'un des seuls cas où vous devez ajouter des caractères par rapport au HTML.</li> </ul> <h2 id=les-attributs-personnaliss-data->Les attributs personnalisés <code>data-*</code></h2> <p>Tout comme les balise de microdonnées, pour ajouter des attribut personnalisés il faut simplement utiliser la notation suivante :</p> <p>slim</p> <pre class="highlight haml"><code>    nav data-dropdown="js-sub-menu" Menu
</code></pre> <p>HTML</p> <pre class="highlight html"><code>    <span class="nt">&lt;nav</span> <span class="na">data-dropdown=</span><span class="s">"js-sub-menu"</span><span class="nt">&gt;</span> Menu <span class="nt">&lt;/nav&gt;</span>
</code></pre> <p>Cela se complique un peu si vous devez ajouter plusieurs attributs, mais la encore la notation est simplifiée si l’on connait la bonne syntaxe :</p> <p>slim</p> <pre class="highlight haml"><code>    div data: {a: 1, b: 2} Foo
</code></pre> <p>HTML</p> <pre class="highlight html"><code>    <span class="nt">&lt;div</span> <span class="na">data-a=</span><span class="s">"1"</span> <span class="na">data-b=</span><span class="s">"2"</span><span class="nt">&gt;</span>Foo<span class="nt">&lt;/div&gt;</span>
</code></pre> <h2 id=crire-du-markdown>Écrire du markdown</h2> <p>Il est possible d’écrire directement du markdown en plein milieu de ses vues. C’est une technique que j’utilise souvent car ce format est pervasif et facilement convertissable.</p> <pre class="highlight markdown"><code>    markdown:
      ## Écrire du markdown
</code></pre> <h3 id=coloration-syntaxique>Coloration syntaxique</h3> <p>Il existe une multitude d’outils pour ajouter de la coloration syntaxique dans des pages web. Ma technique préférée conciste à utiliser du markdown et à préciser le langage souhaité :</p> <p>avec redcarpet :</p> <pre class="highlight markdown"><code>    markdown:
    <span class="p">```</span><span class="nl"> ruby</span>
    <span class="k">def</span> <span class="nf">my_cool_method</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
      <span class="nb">puts</span> <span class="n">message</span>
    <span class="k">end</span>
    <span class="p">```</span>
</code></pre> <p>avec kramdown :</p> <pre class="highlight markdown"><code>    markdown:
    <span class="p">~~~</span><span class="nl"> ruby</span>
    <span class="k">def</span> <span class="nf">my_cool_method</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
      <span class="nb">puts</span> <span class="n">message</span>
    <span class="k">end</span>
    <span class="p">~~~</span>
</code></pre> <h2 id=conclusion>Conclusion</h2> <p>Le principal inconvénient d’utiliser ce moteur de templating est le coût de formation nécessaire à son apprentissage.</p> <p><strong>C’est tout</strong>.</p> <p>La lecture des erreurs est simplifiée car si votre indentation n’est pas parfaite la page ne sera pas compilée. Fini le <code>&lt;/div&gt;</code> fantôme qui casse toute votre mise page.</p> <p>Slim est actuellement 10 fois plus rapide que haml.</p> <p>En supprimant les balises inutiles votre code est plus concis et se lit plus rapidement.</p> <p>Il est toujours possible d’utiliser du code HTML pour vous familiariser avec la syntaxe, que vous abandonerez très vite pour n'utiliser plus que du slim.</p> <hr/> <p>EDIT :</p> <p>Si vous n'utilisez pas ruby il existe des plugins en JavaScript pour vous aider à trouver la lumière :</p> <ul> <li><a href="https://github.com/cognitom/gulp-slim">gulp-slim</a></li> <li><a href="https://github.com/matsumos/grunt-slim">grunt-slim</a></li> </ul> <div class=row><div class="medium-8 medium-centered columns"><aside class=m-blog-panel itemprop=author itemscope="" itemtype="http://schema.org/Person" role=complementary><p><strong>Publié par <a href="https://plus.google.com/+DavidLeulietteWeb?rel=author" itemprop=name>David Leuliette</a><span itemprop=jobTitle>consultant développeur front-end.</span></strong></p><hr/><div class=row><div class="small-3 columns"><a class=l-avatar href="/about.html"><img itemprop=image alt="Avatar Aperture Science" src="../assets/images/front/aperture-science-avatar-da9be508.jpg"/></a></div><div class="small-9 columns"><p>J’aime travailler avec les technologies web et le faire de la bonne façon. En tant qu’<strong itemprop=title>évangéliste open source</strong>, je partage mes bonnes pratiques avec le plus grand nombre. </p></div></div><div class=l-footer><a href="https://twitter.com/_flexbox"><i class="fa fa-fw fa-twitter"></i><span itemprop=nickname>@_flexbox </span>sur twitter </a><a href="/feed.xml"><i class="fa fa-fw fa-rss"></i>S’incrire au flux RSS </a></div></aside></div></div></div></article></div><div class=m-footer--section><div class=row><div class="medium-10 medium-centered columns"><nav class=row role=navigation><div class="small-6 medium-3 columns"><ul class=m-footer--side-nav role=menubar><li class=l-title>Outils</li><li role=menuitem><a title="Logiciels pour le développement et l’intégration web" href="/toolkit.html">Applications</a></li><li role=menuitem><a title="Mes engagements envers le web" href="/manifesto.html">Manifeste</a></li><li role=menuitem><a title="Mes projets" href="/projects.html">Open source</a></li><li role=menuitem><a title="Méthode pour le design de sites internet" href="/webdesign.html">Responsive</a></li></ul></div><div class="small-6 medium-3 columns"><ul class=m-footer--side-nav role=menubar><li class=l-title>Ressources</li><li role=menuitem><a title="Publication d'articles sur l'intégration &amp; le développement front-end" href="/blog/">Blog</a></li><li role=menuitem><a title="conseils de lecture" href="/books.html">Bibliothèque</a></li><li role=menuitem><a title="Liste de personnes à suivre" href="/mentors.html">Mentors</a></li><li role=menuitem><a title="conseils sur la typographie pour le web" href="/typography.html">Typographie</a></li></ul></div><div class="small-6 medium-3 columns"><ul class=m-footer--side-nav role=menubar><li class=l-title>À propos</li><li role=menuitem><a title="Je peux vous aider" href="/about.html">En savoir plus</a></li><li role=menuitem><a href="/gnu.html">GNU GPL</a></li><li role=menuitem><a title="Licence du site &amp; hébergement" href="/legal.html">Mentions légales</a></li><li role=menuitem><a title="Cliquez si vous êtes perdus" href="/sitemap.html">Plan du site</a></li></ul></div><div class="small-6 medium-3 columns"><ul class=m-footer--side-nav role=menubar><li class=l-title>Contact</li><li role=menuitem><a title="Je lis TOUS mes emails" href="/contact.html">Contact</a></li><li role=menuitem><a title="Suivre l’évolution de mes services" href="/newsletter.html">Newsletter</a></li><li role=menuitem><a title="Vous pouvez m’enbaucher" href="/work.html">Services</a></li><li role=menuitem><a title="Je réponds chaque semaine à une question" href="/ask-me.html">Une question ?</a></li></ul></div></nav></div></div></div><footer class=m-footer role=contentinfo><div class=row><div class="medium-8 medium-centered columns"><p class=m-footer--title>Améliorer vos compétences</p><p>Recevez mes conseils en design & développement front-end. Ne vous inquétez pas je déteste le spam, il suffit d’un clic pour se désabonner.</p><form action="http://davidl.us3.list-manage2.com/subscribe/post?u=b72e60a9116993dde8d1547fe&amp;id=e99fbeb8ad" method=post name=mc-embedded-subscribe-form target=_blank><div class=row><div class="small-12 columns"><label for=js-mailchimpemail>S’abonner pour ne pas manquer les nouvelles publications </label></div></div><div class=row><div class="small-8 columns"><input autocapitalize=none autocorrect=off class=m-mailchimpemail id=js-mailchimpemail name=EMAIL placeholder="youare@weso.me" required="" type=email /><div class=hide><input name=b_b72e60a9116993dde8d1547fe_e99fbeb8ad type=text /></div></div><div class="small-4 columns"><button class="button postfix" id=mc-embedded-subscribe name=subscribe type=submit>S’inscrire </button></div></div></form></div></div><hr/><p class=l-text>Ce site open source est hébergé sur <a href="https://github.com/flexbox/davidl">GitHub</a>. Patches, suggestions et commentaires sont les bienvenus. <br/>davidl.fr est rédigé et administré par <a href="/human.txt">David Leuliette</a>. Dernière mise à jour le <time datetime=2016-08-25>25/08/2016. </time></p></footer><script src="../assets/javascripts/application-814f927a.js"></script><script>!function(e,a,n,t,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(n),s=a.getElementsByTagName(n)[0],o.async=1,o.src=t,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-46684635-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");</script></body></html>